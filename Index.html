<!DOCTYPE html>
<html>
<head>
  <base target="_top">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    /* CSS Variables for theme colors */
    :root {
    --wine-red: #7a1c3f;
    --dark-green: #1a472a;
    --light-red: #e8c4d0; /* Light harmonious variant of wine-red */
    --light-green: #d4e8da; /* Light harmonious variant of dark-green */
    --text-dark: #333333;
    --text-light: #f8f9fa;
    --shadow-color: rgba(0, 0, 0, 0.3);
    }
    
    /* Base reset and body styling */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'Segoe UI', system-ui, sans-serif;
    }
    
    body {
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
      background-color: #ffffff;
      overflow: hidden;
      transition: background-color 1.5s cubic-bezier(0.4, 0, 0.2, 1);
    }
    
    /* Main container */
    .container {
      position: relative;
      width: 90%;
      max-width: 400px;
      opacity: 0;
      transform: translateY(20px);
      transition: opacity 0.8s ease, transform 0.8s ease;
      z-index: 2;
    }
    
    /* Image container */
    .image-container {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      z-index: 1;
      width: 100%;
      height: 100%;
      display: flex;
      justify-content: center;
      align-items: center;
      pointer-events: none;
    }
    
    /* Demo PNG image styling */
    .demo-image {
      max-width: 300px;
      max-height: 300px;
      width: auto;
      height: auto;
      opacity: 0;
      transform: scale(0.8);
      transition: all 1s cubic-bezier(0.34, 1.56, 0.64, 1);
      filter: drop-shadow(0 10px 20px rgba(0, 0, 0, 0.3));
      border-radius: 15px;
    }
    
    /* Image animation classes */
    .image-enter {
      animation: imageEnter 1.2s forwards cubic-bezier(0.34, 1.56, 0.64, 1);
    }
    
    .image-exit {
      animation: imageExit 1s forwards cubic-bezier(0.4, 0, 0.2, 1);
    }
    
    @keyframes imageEnter {
      0% {
        opacity: 0;
        transform: scale(0.8) translateY(30px);
      }
      70% {
        opacity: 0.9;
        transform: scale(1.05) translateY(-5px);
      }
      100% {
        opacity: 1;
        transform: scale(1) translateY(0);
      }
    }
    
    @keyframes imageExit {
      0% {
        opacity: 1;
        transform: scale(1) translateY(0);
      }
      100% {
        opacity: 0;
        transform: scale(0.8) translateY(30px);
      }
    }
    
    /* Floating animation for image on load */
    @keyframes float {
      0%, 100% {
        transform: translateY(0px);
      }
      50% {
        transform: translateY(-15px);
      }
    }
    
    .image-float {
      animation: float 6s ease-in-out infinite;
    }
    
    /* Login form box */
    .login-box {
      background: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(10px);
      border-radius: 20px;
      padding: 2.5rem;
      box-shadow: 0 15px 35px var(--shadow-color);
      border: 1px solid rgba(255, 255, 255, 0.2);
    }
    
    /* Input group styling */
    .input-group {
      margin-bottom: 1.5rem;
      position: relative;
    }
    
    /* Input field styling */
    .input-field {
      width: 100%;
      padding: 1rem 1rem 1rem 3rem;
      border: 2px solid rgba(122, 28, 63, 0.2);
      border-radius: 12px;
      font-size: 1rem;
      background: rgba(255, 255, 255, 0.9);
      transition: all 0.3s ease;
      outline: none;
      opacity: 0;
      transform: translateX(-20px);
    }
    
    .input-field:focus {
      border-color: var(--wine-red);
      box-shadow: 0 0 0 3px rgba(122, 28, 63, 0.1);
    }
    
    /* Input icons */
    .input-icon {
      position: absolute;
      left: 1rem;
      top: 50%;
      transform: translateY(-50%);
      color: var(--wine-red);
      opacity: 0.6;
      transition: opacity 0.3s;
    }
    
    .input-field:focus + .input-icon {
      opacity: 1;
    }
    
    /* Placeholder animation for username */
    @keyframes blink {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.3; }
    }
    
    .input-field::placeholder {
      color: #666;
      animation: blink 2s infinite;
    }
    
    /* Button styling */
    .action-btn {
    width: 100%;
    padding: 1rem;
    border: none;
    border-radius: 12px;
    font-size: 1.1rem;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.8s cubic-bezier(0.4, 0, 0.2, 1); /* Slower transition */
    background: linear-gradient(135deg, var(--wine-red), #9d2b5a);
    color: var(--text-light);
    opacity: 0;
    transform: translateY(10px);
    box-shadow: 0 5px 15px rgba(122, 28, 63, 0.4);
    position: relative;
    overflow: hidden;
    }
    
    /* Add a subtle shine effect */
    .action-btn::after {
    content: '';
    position: absolute;
    top: -50%;
    left: -60%;
    width: 20%;
    height: 200%;
    background: rgba(255, 255, 255, 0.1);
    transform: rotate(30deg);
    transition: all 0.5s ease;
    }
    
    .action-btn:hover::after {
    left: 120%;
    }
    
    /* Light red button variant */
    .action-btn.light-red {
    background: linear-gradient(135deg, var(--light-red), #f0d8e0);
    color: var(--wine-red);
    box-shadow: 0 5px 15px rgba(232, 196, 208, 0.4);
    border: 2px solid rgba(122, 28, 63, 0.2);
    }
    
    /* Light green button variant */
    .action-btn.light-green {
    background: linear-gradient(135deg, var(--light-green), #e3f0e8);
    color: var(--dark-green);
    box-shadow: 0 5px 15px rgba(26, 71, 42, 0.2);
    border: 2px solid rgba(26, 71, 42, 0.2);
    }
    
    .action-btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 20px rgba(122, 28, 63, 0.6);
    }
    .action-btn.light-red:hover {
    box-shadow: 0 8px 20px rgba(232, 196, 208, 0.6);
    }
    
    .action-btn.light-green:hover {
    box-shadow: 0 8px 20px rgba(26, 71, 42, 0.3);
    }
    .action-btn:active {
    transform: translateY(0);
    }
    
    /* Add transition for text color changes */
    .action-btn span {
    transition: color 0.5s ease;
    }
    /* Hidden class for elements */
    .hidden {
      display: none !important;
    }
    
    /* Fade-in animation */
    .fade-in {
      animation: fadeIn 0.8s forwards;
    }
    
    @keyframes fadeIn {
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
    
    /* Overlay for background dim */
    .overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.5);
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.8s ease;
      z-index: 999;
    }
    
    .overlay.active {
      opacity: 1;
      pointer-events: all;
    }
    
    /* Responsive adjustments */
    @media (max-width: 480px) {
      .login-box {
        padding: 2rem;
        margin: 1rem;
      }
      
      .input-field {
        padding: 0.9rem 0.9rem 0.9rem 2.8rem;
      }
      
      .demo-image {
        max-width: 250px;
        max-height: 250px;
      }
    }
  </style>
</head>
<body>
  <!-- Overlay for background dim -->
  <div class="overlay" id="overlay"></div>
  
  <!-- PNG Image Container -->
  <div class="image-container">
    <img id="demoImage" class="demo-image" alt="Demo Image">
  </div>
  
  <!-- Main Content Container -->
  <div class="container">
    <div class="login-box">
      <div class="input-group">
        <i class="input-icon fas fa-user"></i>
        <input 
          type="text" 
          id="username" 
          class="input-field" 
          placeholder="nome de usuário (Ou clique abaixo em cadastre-me)"
          autocomplete="off"
        >
      </div>
      
      <div class="input-group hidden" id="password-group">
        <i class="input-icon fas fa-lock"></i>
        <input 
          type="password" 
          id="password" 
          class="input-field" 
          placeholder="senha"
          autocomplete="off"
        >
      </div>
      
      <button id="action-btn" class="action-btn">cadastre-me</button>
    </div>
  </div>

  <script>
    // Main application controller
    class UIDemoController {
      constructor() {
        this.initElements();
        this.loadImageClientSideOnly();
        this.bindEvents();
        
        // Configuration: Choose when to show the image
        this.config = {
          showImageOnLoad: true,     // Show image when page loads
          showImageOnButtonClick: true, // Show image when button is clicked
          imageFloatOnLoad: true     // Add floating animation on load
        };
        
        this.startSequence();
      }
      
      /**
       * Cache DOM elements for performance
       */
      initElements() {
        this.body = document.body;
        this.container = document.querySelector('.container');
        this.usernameInput = document.getElementById('username');
        this.passwordGroup = document.getElementById('password-group');
        this.passwordInput = document.getElementById('password');
        this.actionBtn = document.getElementById('action-btn');
        this.demoImage = document.getElementById('demoImage');
        this.overlay = document.getElementById('overlay');
        this.isTransitioning = false;
        this.imageVisible = false;
      }
      
      /**
      * Load PNG image from server (dropbox)
      */
      loadImageClientSideOnly() {
      const dropboxLink =
      'https://www.dropbox.com/scl/fi/v7bj219c4sz7irj4uxsvy/Design.png?rlkey=mmqgbxk3wj6bilaxt6wz90mro&st=p7ae6xdq&dl=1';
      
      // Atribui o link diretamente ao src.
      // O navegador se encarrega de fazer a requisição HTTP GET para o Dropbox.
      this.demoImage.src = dropboxLink;
      
      // Opcional: Adicionar listeners para sucesso/falha no carregamento
      this.demoImage.onload = () => {
      console.log('Imagem carregada com sucesso diretamente do Dropbox.');
      };
      
      this.demoImage.onerror = (error) => {
      console.error('Falha ao carregar a imagem do Dropbox:', error);
      // Implemente um fallback local se necessário
      };
      }
      
      /**
      * Bind event listeners to UI elements
      */
      bindEvents() {
        // Username input events
        this.usernameInput.addEventListener('input', () => this.handleUsernameInput());
        this.usernameInput.addEventListener('keydown', (e) => this.handleUsernameKeydown(e));
        this.usernameInput.addEventListener('focus', () => this.handleUsernameFocus());
        
        // Password input events
        this.passwordInput.addEventListener('input', () => this.handlePasswordInput());
        this.passwordInput.addEventListener('keydown', (e) => this.handlePasswordKeydown(e));
        
        // Button click event
        this.actionBtn.addEventListener('click', () => this.handleButtonClick());
        
        // Window resize handling
        window.addEventListener('resize', () => this.handleResize());
      }
      
      /**
       * Start the initial UI animation sequence
       */
      startSequence() {
        // Show image on load if configured
        if (this.config.showImageOnLoad && !this.imageVisible) {
          setTimeout(() => {
            this.showImage();
            
            // Hide image after 3 seconds and start the rest of the sequence
            setTimeout(() => {
              this.hideImage();
              this.startMainSequence();
            }, 3000);
          }, 500);
        } else {
          this.startMainSequence();
        }
      }
      
      /**
       * Start the main login sequence
       */
      startMainSequence() {
        // Initial background transition to wine red
        setTimeout(() => {
          this.body.style.backgroundColor = 'var(--wine-red)';
          
          // Fade in container and elements
          setTimeout(() => {
            this.container.style.opacity = '1';
            this.container.style.transform = 'translateY(0)';
            
            // Animate username input
            setTimeout(() => {
              this.usernameInput.classList.add('fade-in');
              
              // Animate button
              setTimeout(() => {
                this.actionBtn.classList.add('fade-in');
              }, 300);
            }, 200);
          }, 300);
        }, 100);
      }
      
      /**
       * Show the PNG image with animation
       */
      showImage(options = {}) {
        if (this.imageVisible) return;
        
        this.imageVisible = true;
        
        // Remove any existing animation classes
        this.demoImage.classList.remove('image-exit');
        this.demoImage.classList.remove('image-float');
        
        // Add overlay for background dim
        if (options.dimBackground) {
          this.overlay.classList.add('active');
        }
        
        // Hide main container while image is showing
        if (options.hideContainer) {
          this.container.style.opacity = '0';
          this.container.style.pointerEvents = 'none';
        }
        
        // Add enter animation
        setTimeout(() => {
          this.demoImage.classList.add('image-enter');
          
          // Add floating animation if configured
          if (this.config.imageFloatOnLoad) {
            setTimeout(() => {
              this.demoImage.classList.add('image-float');
            }, 1200);
          }
        }, 50);
      }
      
      /**
       * Hide the PNG image with animation
       */
      hideImage() {
        if (!this.imageVisible) return;
        
        this.imageVisible = false;
        
        // Remove animation classes
        this.demoImage.classList.remove('image-enter');
        this.demoImage.classList.remove('image-float');
        
        // Add exit animation
        this.demoImage.classList.add('image-exit');
        
        // Remove overlay
        this.overlay.classList.remove('active');
        
        // Show main container again
        this.container.style.opacity = '1';
        this.container.style.pointerEvents = 'all';
        
        // Reset image after animation completes
        setTimeout(() => {
          this.demoImage.classList.remove('image-exit');
        }, 1000);
      }
      
      /**
       * Handle username input changes
       */
      handleUsernameInput() {
        if (this.usernameInput.value.length > 0 && !this.passwordGroup.classList.contains('fade-in')) {
          // Change button text to "Login"
          this.actionBtn.textContent = 'Login';
          
          // Show password field with animation
          this.passwordGroup.classList.remove('hidden');
          setTimeout(() => {
            this.passwordGroup.classList.add('fade-in');
            this.passwordInput.classList.add('fade-in');
          }, 10);
        } else if (this.usernameInput.value.length === 0) {
          // Revert to initial state if username is empty
          this.actionBtn.textContent = 'cadastre-me';
          this.passwordGroup.classList.remove('fade-in');
          setTimeout(() => {
            this.passwordGroup.classList.add('hidden');
          }, 300);
        }
      }
      
      /**
       * Handle username field focus
       */
      handleUsernameFocus() {
        // Ensure button shows correct text when focused
        if (this.usernameInput.value.length > 0) {
          this.actionBtn.textContent = 'Login';
        }
      }
      
      /**
       * Handle Tab or Enter in username field
       */
      handleUsernameKeydown(e) {
        if ((e.key === 'Tab' || e.key === 'Enter') && this.usernameInput.value.length > 0) {
          e.preventDefault();
          
          // Show password field if not visible
          if (this.passwordGroup.classList.contains('hidden')) {
            this.handleUsernameInput();
          }
          
          // Focus password field
          setTimeout(() => {
            this.passwordInput.focus();
          }, 50);
        }
      }
      
      /**
       * Handle password input - trigger background color change
       */
      handlePasswordInput() {
        if (this.passwordInput.value.length > 0 && !this.isTransitioning) {
          this.isTransitioning = true;
          
          // Transition background from red to dark green
          this.body.style.backgroundColor = 'var(--dark-green)';
          // Change button to light green variant
            this.updateButtonColor('light-green', 'Login');

          // Reset transition lock after completion
          setTimeout(() => {
            this.isTransitioning = false;
          }, 1500);
        } else if (this.passwordInput.value.length === 0 && this.isTransitioning) {
          // Revert to red if password is cleared
          this.body.style.backgroundColor = 'var(--wine-red)';
          this.isTransitioning = false;

    
    // Determine button color based on username input
    const usernameValue = this.usernameInput.value;
    
    if (usernameValue.length > 0) {
      // Username exists, no password - use light red
      this.updateButtonColor('light-red', 'Login');
    } else {
      // No inputs at all - revert to default red
      this.updateButtonColor('default', 'cadastre-me');
          }
        }
      }
      /**
 * Update button color and text based on state
 * @param {string} variant - 'default', 'light-red', or 'light-green'
 * @param {string} text - Button text to display
 */
updateButtonColor(variant, text) {
  // Remove all color classes
  this.actionBtn.classList.remove('light-red', 'light-green');
  
  // Add the appropriate color class
  if (variant === 'light-red') {
    this.actionBtn.classList.add('light-red');
  } else if (variant === 'light-green') {
    this.actionBtn.classList.add('light-green');
  }
  // If variant is 'default', we just remove the classes
  
  // Update button text with smooth transition
  this.actionBtn.textContent = text;
}

/**
 * Updated: Handle username input changes
 */
handleUsernameInput() {
  const usernameValue = this.usernameInput.value;
  const passwordValue = this.passwordInput.value;
  const hasUsername = usernameValue.length > 0;
  const hasPassword = passwordValue.length > 0;
  
  if (hasUsername && !this.passwordGroup.classList.contains('fade-in')) {
    // Show password field with animation
    this.passwordGroup.classList.remove('hidden');
    setTimeout(() => {
      this.passwordGroup.classList.add('fade-in');
      this.passwordInput.classList.add('fade-in');
    }, 10);
  }
  
  // Update button based on input states
  if (hasUsername && hasPassword) {
    // Both fields have content
    this.updateButtonColor('light-green', 'Login');
  } else if (hasUsername && !hasPassword) {
    // Only username has content
    this.updateButtonColor('light-red', 'Login');
  } else if (!hasUsername && !hasPassword) {
    // No content in either field
    this.updateButtonColor('default', 'cadastre-me');
    
    // Hide password field if empty
    this.passwordGroup.classList.remove('fade-in');
    setTimeout(() => {
      this.passwordGroup.classList.add('hidden');
    }, 300);
  }
  // Note: hasPassword without username shouldn't happen naturally
}

      /**
       * Handle Enter in password field
       */
      handlePasswordKeydown(e) {
        if (e.key === 'Enter' && this.passwordInput.value.length > 0) {
          this.handleButtonClick();
        }
      }
      
      /**
       * Handle login/register button click
       */
      handleButtonClick() {
        // Prevent multiple clicks during transition
        if (this.isTransitioning) return;
        
        this.isTransitioning = true;
        
        // Show image on button click if configured
        if (this.config.showImageOnButtonClick) {
          this.showImage({
            dimBackground: true,
            hideContainer: true
          });
          
          // Wait for image to show, then proceed with reset
          setTimeout(() => {
            this.proceedWithReset();
          }, 2000);
        } else {
          // Proceed directly to reset without showing image
          this.proceedWithReset();
        }
      }
      
      /**
       * Proceed with reset sequence after image display
       */
      proceedWithReset() {
        // Hide image if it's visible
        if (this.imageVisible) {
          this.hideImage();
        }
        // Reset button to default color
        this.updateButtonColor('default', 'cadastre-me');

        // Fade out all elements
        this.container.style.opacity = '0';
        this.container.style.transform = 'translateY(20px)';
        
        // Fade background to white
        setTimeout(() => {
          this.body.style.backgroundColor = '#ffffff';
          
          // Reset form and restart sequence
          setTimeout(() => {
            this.resetForm();
            this.isTransitioning = false;
            this.startSequence();
          }, 1000);
        }, 500);
      }
      
      /**
       * Reset form to initial state
       */
      resetForm() {
        // Clear inputs
        this.usernameInput.value = '';
        this.passwordInput.value = '';
        
          // Reset button to default
          this.updateButtonColor('default', 'cadastre-me');

        // Reset styles and visibility
        this.usernameInput.classList.remove('fade-in');
        this.actionBtn.classList.remove('fade-in');
        this.passwordGroup.classList.remove('fade-in');
        this.passwordGroup.classList.add('hidden');
        this.passwordInput.classList.remove('fade-in');
        
        
        // Reset container
        this.container.style.opacity = '0';
        this.container.style.transform = 'translateY(20px)';
        this.container.style.pointerEvents = 'all';
      }
      
      /**
       * Handle window resize for responsiveness
       */
      handleResize() {
        // Adjust image size on resize
        const width = window.innerWidth;
        if (width < 768) {
          this.demoImage.style.maxWidth = '250px';
          this.demoImage.style.maxHeight = '250px';
        } else {
          this.demoImage.style.maxWidth = '300px';
          this.demoImage.style.maxHeight = '300px';
        }
      }
    }
    
    // Initialize the application when DOM is loaded
    document.addEventListener('DOMContentLoaded', () => {
      new UIDemoController();
    });
  </script>
</body>
</html>
